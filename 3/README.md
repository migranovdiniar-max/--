# Архитектура email-аутрича (≈1200 ящиков)

## Кратко

Данная архитектура предназначена для обслуживания **до 1200 email-адресов** для холодного аутрича в формате **нескольких клиентов и направлений** с приоритетом на:

* минимальную стоимость инфраструктуры;
* высокую отказоустойчивость;
* контроль репутации доменов и ящиков;
* изоляцию клиентов друг от друга.

Инфраструктура строится вокруг **нескольких десятков доменов**, **дешёвых корпоративных ящиков** у массового провайдера и **отдельной платформы аутрича** с автоматической ротацией и мониторингом.

---

## Общая архитектура

Для каждого клиента создаётся отдельный логический **workspace**, внутри которого есть собственный пул доменов и почтовых ящиков. Это исключает перетекание репутационных рисков между клиентами.

### Компоненты

* **40–60 доменов для аутрича**
  По 3–5 ящиков на домен до 1200 ящиков.

* **Регистраторы доменов (РФ)**
  REG.RU, Ru-Center, Timeweb и аналоги.

* **Почтовые провайдеры (РФ)**
  Яндекс 360, Mail.ru для бизнеса, корпоративная почта у российских хостеров.

* **Outreach-платформа**
  SaaS или self-hosted сервис (Docker + PostgreSQL), размещённый в РФ или на VPS.

---

## Используемые сервисы и подходы

### Домены

* покупка пачки недорогих доменов (.ru, .com, .online и др.);
* шаблонные DNS-настройки:

  * SPF
  * DKIM
  * DMARC
  * MX
  * трекинг-домены;
* автоматизация управления доменами через:

  * Terraform / Ansible;
  * API регистратора;
  * кастомные скрипты.

### Почта

* бизнес‑почта у массового российского провайдера;
* массовое создание ящиков;
* поддержка SPF/DKIM;
* централизованное администрирование через API или панель управления.

### Outreach‑сервис

Функции платформы:

* хранение кампаний и последовательностей;
* шаблоны писем;
* интеграция с ящиками через IMAP/SMTP/OAuth;
* учёт лимитов отправки;
* автоматическая ротация ящиков;
* аналитика:

  * open rate;
  * reply rate;
  * bounce rate;
  * косвенные spam‑сигналы.

### Доставляемость и аутентификация

* корректно настроенные SPF, DKIM, DMARC;
* DMARC стратегия:

  * старт: `p=none`;
  * позже: `quarantine` → `reject`;
* отдельные трекинг‑домены для кликов и открытий.

---

## Ротация и мониторинг

### Прогрев ящиков

* длительность: **4–8 недель**;
* старт: 1–2 письма в день;
* постепенный рост до 30–50 писем/день;
* реализация через отдельный модуль:

  * письма между собственными ящиками;
  * автоответы;
  * пометка писем как «не спам».

### Ротация отправки

* каждая кампания использует **группу ящиков**;
* равномерное распределение писем;
* жёсткие дневные лимиты (30–40 писем/ящик);
* автоматический cooldown при ухудшении метрик;
* отключение проблемных доменов/ящиков с заменой на резервные.

### Мониторинг

Отслеживаемые метрики:

* **по ящикам**:

  * open rate;
  * reply rate;
  * bounce rate;
  * ошибки авторизации/SMTP;

* **по доменам**:

  * агрегированная статистика;
  * периодические проверки на blacklist‑ах.

Алерты:

* Telegram / Slack;
* резкие скачки отказов;
* падение открытий;
* массовые ошибки доставки.

---

## Распределение нагрузки

### По доменам

* лимит на домен: ~100–150 писем/день;
* при деградации метрик объём снижается;
* подключаются резервные домены.

### По ящикам

* жёсткий лимит: 30–50 исходящих/день;
* лимиты зависят от:

  * провайдера;
  * прогретости;
* увеличение объёмов — только постепенно.

### По клиентам и кампаниям

* каждый клиент имеет собственный пул доменов и ящиков;
* кампании используют подмножества пула;
* исключается пересечение аудиторий и метрик.

---

## Риски и способы их закрытия

### Сгорание доменов

**Риски:** blacklist, блокировки, падение доставляемости.

**Контрмеры:**

* запас доменов (из 60 активно 40–45);
* плавный рост объёмов;
* быстрая замена доменов и миграция кампаний.

### Рост bounce и spam‑репортов

**Контрмеры:**

* строгие лимиты;
* авто‑снижение объёмов при превышении порогов;
* валидация email-баз;
* аккуратный контент:

  * plain‑text;
  * минимум триггерных слов;
  * персонализация.

### Отказ провайдера или регистратора

**Контрмеры:**

* несколько регистраторов;
* несколько почтовых провайдеров;
* бэкапы DNS-зон и конфигураций;
* резервный VPS с аутрич‑сервисом.

### Юридические и репутационные риски

* соблюдение законодательства РФ о рекламе и персональных данных;
* понятные контакты отправителя;
* прозрачная возможность отписки;
* отказ от агрессивного спама.

---

## Оценка стоимости (₽/мес)

### Домены

* 40–60 доменов;
* 900–1200 ₽ / домен / год.

**В месяц:** ~3 000–6 000 ₽.

### Почтовые ящики

* корпоративные тарифы при больших объёмах;
* ориентир: 50–100 ₽ / ящик / месяц.

**1200 ящиков:** ~30 000–80 000 ₽ / мес.

### Outreach‑платформа и инфраструктура

**Self‑hosted:**

* 2–4 VPS по 800–2 000 ₽;
* итого: ~1 600–8 000 ₽ / мес.

**SaaS (агентский формат):**

* ~10 000–30 000 ₽ / мес.

---

## Итоговая стоимость

* **Минимум (оптимизация + self‑hosted):**
  **~35 000–50 000 ₽ / месяц**

* **Максимум (SaaS + дорогие провайдеры):**
  **~90 000–120 000 ₽ / месяц**

---

## Итог

Архитектура:

* линейно масштабируется;
* дёшево поддерживается;
* устойчива к блокировкам;
* подходит для агентств и in‑house команд.
